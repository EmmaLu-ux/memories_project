{"ast":null,"code":"import _toConsumableArray from\"/Users/emmalu/Documents/fronted/workspace/reactProjects/memories_project/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/emmalu/Documents/fronted/workspace/reactProjects/memories_project/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{Container,Grow,Grid,Paper,AppBar,TextField,Button}from'@material-ui/core';import{useDispatch}from'react-redux';import{useLocation,useNavigate}from'react-router-dom';import ChipInput from'material-ui-chip-input';import Posts from'../Posts/Posts';import Form from'../Form/Form';import Pagination from'../Pagination';import useStyles from'./styles';import{getPosts,getPostsBySearch}from'../../actions/posts';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function useQuery(){return new URLSearchParams(useLocation().search);}var Home=function Home(){var classes=useStyles();var dispatch=useDispatch();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),currentId=_useState2[0],setCurrentId=_useState2[1];var navigate=useNavigate();var query=useQuery();var page=query.get('page')||1;// 监视着浏览器地址栏的地址是否有page这个参数，有就获取其值，没有就为1\nvar searchQuery=query.get('searchQuery');// 监视着浏览器地址栏的地址是否有search这个参数，有就获取其值，没有就没有\nvar _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),search=_useState4[0],setSearch=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),tags=_useState6[0],setTags=_useState6[1];// [a, b] -> 'a, b'\n// useEffect(() => {\n//     dispatch(getPosts())\n// }, [dispatch])\nvar searchPost=function searchPost(){if(search.trim()||tags){// dispatch(searchAction) -> 获取posts\n// console.log(tags instanceof Array) // Array\ndispatch(getPostsBySearch({search:search,tags:tags.join(',')}));navigate(\"/posts/search?searchQuery=\".concat(search||'none',\"&tags=\").concat(tags.join(',')));}else{navigate('/');}};var handleKeyDown=function handleKeyDown(e){if(e.keyCode===13){// 搜索post\nsearchPost();}};var handleAdd=function handleAdd(tag){return setTags([].concat(_toConsumableArray(tags),[tag]));};var handleDelete=function handleDelete(tagToDelete){return setTags(tags.filter(function(tag){return tag!==tagToDelete;}));};return/*#__PURE__*/_jsx(Grow,{in:true,children:/*#__PURE__*/_jsx(Container,{maxWidth:\"xl\",children:/*#__PURE__*/_jsxs(Grid,{container:true,className:classes.gridContainer,justifyContent:\"space-between\",alignItems:\"stretch\",spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:9,children:/*#__PURE__*/_jsx(Posts,{setCurrentId:setCurrentId})}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,sm:6,md:3,children:[/*#__PURE__*/_jsxs(AppBar,{className:classes.appBarSearch,position:\"static\",color:\"inherit\",children:[/*#__PURE__*/_jsx(TextField,{name:\"search\",label:\"\\u641C\\u7D22\",variant:\"outlined\",fullWidth:true,value:search,onChange:function onChange(e){return setSearch(e.target.value);},onKeyDown:handleKeyDown}),/*#__PURE__*/_jsx(ChipInput,{style:{margin:'10px 0'},value:tags,onAdd:handleAdd,onDelete:handleDelete,label:\"\\u641C\\u7D22\\u6807\\u7B7E\",variant:\"outlined\"}),/*#__PURE__*/_jsx(Button,{onClick:searchPost,className:classes.appBarSearch,color:\"primary\",variant:\"contained\",children:\"\\u641C\\u7D22\"})]}),/*#__PURE__*/_jsx(Form,{currentId:currentId,setCurrentId:setCurrentId}),!searchQuery&&!tags.length&&/*#__PURE__*/_jsx(Paper,{elevation:6,className:classes.pagination,children:/*#__PURE__*/_jsx(Pagination,{page:page})})]})]})})});};export default Home;","map":{"version":3,"names":["React","useState","useEffect","Container","Grow","Grid","Paper","AppBar","TextField","Button","useDispatch","useLocation","useNavigate","ChipInput","Posts","Form","Pagination","useStyles","getPosts","getPostsBySearch","useQuery","URLSearchParams","search","Home","classes","dispatch","currentId","setCurrentId","navigate","query","page","get","searchQuery","setSearch","tags","setTags","searchPost","trim","join","handleKeyDown","e","keyCode","handleAdd","tag","handleDelete","tagToDelete","filter","gridContainer","appBarSearch","target","value","margin","length","pagination"],"sources":["/Users/emmalu/Documents/fronted/workspace/reactProjects/memories_project/client/src/components/Home/Home.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { Container, Grow, Grid, Paper, AppBar, TextField, Button } from '@material-ui/core'\nimport { useDispatch } from 'react-redux'\nimport { useLocation, useNavigate } from 'react-router-dom'\nimport ChipInput from 'material-ui-chip-input'\n\nimport Posts from '../Posts/Posts'\nimport Form from '../Form/Form'\nimport Pagination from '../Pagination'\nimport useStyles from './styles'\nimport { getPosts, getPostsBySearch } from '../../actions/posts'\n\nfunction useQuery() {\n    return new URLSearchParams(useLocation().search)\n}\n\nconst Home = () => {\n    const classes = useStyles()\n    const dispatch = useDispatch()\n    const [currentId, setCurrentId] = useState(null)\n    const navigate = useNavigate()\n    const query = useQuery()\n    const page = query.get('page') || 1 // 监视着浏览器地址栏的地址是否有page这个参数，有就获取其值，没有就为1\n    const searchQuery = query.get('searchQuery') // 监视着浏览器地址栏的地址是否有search这个参数，有就获取其值，没有就没有\n    const [search, setSearch] = useState('')\n    const [tags, setTags] = useState([]) // [a, b] -> 'a, b'\n\n    // useEffect(() => {\n    //     dispatch(getPosts())\n    // }, [dispatch])\n\n    const searchPost = () => {\n        if (search.trim() || tags) {\n            // dispatch(searchAction) -> 获取posts\n            // console.log(tags instanceof Array) // Array\n            dispatch(getPostsBySearch({ search, tags: tags.join(',') }))\n            navigate(`/posts/search?searchQuery=${search || 'none'}&tags=${tags.join(',')}`)\n        } else {\n            navigate('/')\n        }\n    }\n\n    const handleKeyDown = (e) => {\n        if (e.keyCode === 13) {\n            // 搜索post\n            searchPost()\n        }\n    }\n\n    const handleAdd = tag => setTags([ ...tags, tag ])\n    const handleDelete = tagToDelete => setTags(tags.filter(tag => tag !== tagToDelete))\n    return (\n        <Grow in>\n            <Container maxWidth='xl'>\n                <Grid container className={classes.gridContainer} justifyContent='space-between' alignItems='stretch' spacing={3}>\n                    <Grid item xs={12} sm={6} md={9}>\n                        <Posts setCurrentId={setCurrentId} />\n                    </Grid>\n                    <Grid item xs={12} sm={6} md={3}>\n                        <AppBar className={classes.appBarSearch} position='static' color='inherit'>\n                            <TextField name='search' label='搜索' variant='outlined' fullWidth value={search} onChange={(e) => setSearch(e.target.value)} onKeyDown={handleKeyDown} />\n                            <ChipInput\n                                style={{ margin: '10px 0' }}\n                                value={tags}\n                                onAdd={handleAdd}\n                                onDelete={handleDelete}\n                                label='搜索标签'\n                                variant='outlined'\n                            />\n                            <Button onClick={searchPost} className={classes.appBarSearch} color='primary' variant='contained'>搜索</Button>\n                        </AppBar>\n                        <Form currentId={currentId} setCurrentId={setCurrentId} />\n                        {(!searchQuery && !tags.length) && (\n                            <Paper elevation={6} className={classes.pagination}>\n                                <Pagination page={page} />\n                            </Paper>\n                        )}\n                    </Grid>\n                </Grid>\n            </Container>\n        </Grow>\n    )\n}\n\nexport default Home"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}